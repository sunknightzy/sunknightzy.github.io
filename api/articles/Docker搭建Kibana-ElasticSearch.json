{"title":"Dockeræ­å»ºKibana+ElasticSearch","uid":"61eea4bbe78b91308bbd442a5070c4bd","slug":"Dockeræ­å»ºKibana-ElasticSearch","date":"2018-04-04T05:19:11.000Z","updated":"2019-05-04T03:19:46.000Z","comments":true,"path":"api/articles/Dockeræ­å»ºKibana-ElasticSearch.json","keywords":null,"cover":"https://raw.githubusercontent.com/sunknightzy/picsee/main/Picsee/abnerworks.Typora/maxresdefault-ok9xVF.jpeg","content":"<h2 id=\"åˆ›å»ºå®¿ä¸»æœºç›®å½•\"><a href=\"#åˆ›å»ºå®¿ä¸»æœºç›®å½•\" class=\"headerlink\" title=\"åˆ›å»ºå®¿ä¸»æœºç›®å½•\"></a>åˆ›å»ºå®¿ä¸»æœºç›®å½•</h2><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">mkdir</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">-p</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/Users/oak/docker/elasticsearch/config</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/Users/oak/docker/elasticsearch/data</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/Users/oak/docker/elasticsearch/log</span></span></code></pre></div><h2 id=\"é…ç½®\"><a href=\"#é…ç½®\" class=\"headerlink\" title=\"é…ç½®\"></a>é…ç½®</h2><p>ä¿®æ”¹ elasticsearch.yml é…ç½®æ–‡ä»¶å…è®¸å¤–éƒ¨è®¿é—® (é»˜è®¤é…ç½®å°±è¡Œ)</p>\n<div class=\"language-yaml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">yaml</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #F07178\">network.host</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0.0.0.0</span></span></code></pre></div><h2 id=\"å¯åŠ¨ElasticSearch\"><a href=\"#å¯åŠ¨ElasticSearch\" class=\"headerlink\" title=\"å¯åŠ¨ElasticSearch\"></a>å¯åŠ¨ElasticSearch</h2><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">docker</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">run</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">--name</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">elasticsearch</span><span style=\"color: #EEFFFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">-p </span><span style=\"color: #F78C6C\">9200</span><span style=\"color: #C3E88D\">:9200</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">-p</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">9300</span><span style=\"color: #C3E88D\">:9300</span><span style=\"color: #EEFFFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">-e </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">discovery.type=single-node</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">-e </span><span style=\"color: #C3E88D\">ES_JAVA_OPTS=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">-Xms512m -Xmx512m</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">-v </span><span style=\"color: #C3E88D\">/Users/oak/docker/elasticsearch/conf/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml</span><span style=\"color: #EEFFFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">-v </span><span style=\"color: #C3E88D\">/Users/oak/docker/elasticsearch/data:/usr/share/elasticsearch/data</span><span style=\"color: #EEFFFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">-d </span><span style=\"color: #C3E88D\">elasticsearch:6.7.1</span></span></code></pre></div><h2 id=\"å¯åŠ¨Kibana\"><a href=\"#å¯åŠ¨Kibana\" class=\"headerlink\" title=\"å¯åŠ¨Kibana\"></a>å¯åŠ¨Kibana</h2><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">docker</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">run</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">--name</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">kibana</span><span style=\"color: #EEFFFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">--link </span><span style=\"color: #C3E88D\">elasticsearch</span><span style=\"color: #EEFFFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">-e </span><span style=\"color: #C3E88D\">ELASTICSEARCH_URL=http://elasticsearch:9200</span><span style=\"color: #EEFFFF\"> \\</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">-p </span><span style=\"color: #F78C6C\">5601</span><span style=\"color: #C3E88D\">:5601</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">-d</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">kibana:6.7.1</span></span></code></pre></div><h2 id=\"Elasticsearch-é…ç½®æ–‡ä»¶è¯¦è§£\"><a href=\"#Elasticsearch-é…ç½®æ–‡ä»¶è¯¦è§£\" class=\"headerlink\" title=\"Elasticsearch é…ç½®æ–‡ä»¶è¯¦è§£\"></a>Elasticsearch é…ç½®æ–‡ä»¶è¯¦è§£</h2><details class=\"custom-details\">\n<summary>å±•å¼€é…ç½®æ–‡ä»¶ elasticsearch.yaml</summary>\n<p><div class=\"language-yaml\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">yaml</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># æ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œå¦‚ï¼š cluster.name: $&#123;CLUSTER_NAME&#125; è¡¨ç¤ºç¯å¢ƒå˜é‡ä¸­æœ‰ä¸€ä¸ªCLUSTER_NAMEå˜é‡</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># ä¸‹é¢åˆ—ä¸¾ä¸€ä¸‹elasticsearchçš„å¯é…ç½®é¡¹ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 1. é›†ç¾¤åç§°ï¼Œé»˜è®¤ä¸ºelasticsearchï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">cluster.name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">elasticsearch</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 2. èŠ‚ç‚¹åç§°ï¼Œeså¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºèŠ‚ç‚¹åç§°ï¼Œä½†ä½ ä¹Ÿå¯è¿›è¡Œé…ç½®ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">node.name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Franz Kafka</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 3. æ˜¯å¦ä½œä¸ºä¸»èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥è¢«é…ç½®æˆä¸ºä¸»èŠ‚ç‚¹ï¼Œé»˜è®¤å€¼ä¸ºtrueï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">node.master</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #FF9CAC\">true</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 4. æ˜¯å¦å­˜å‚¨æ•°æ®ï¼Œå³å­˜å‚¨ç´¢å¼•ç‰‡æ®µï¼Œé»˜è®¤å€¼ä¸ºtrueï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">node.data</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #FF9CAC\">true</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># masterå’ŒdataåŒæ—¶é…ç½®ä¼šäº§ç”Ÿä¸€äº›å¥‡å¼‚çš„æ•ˆæœï¼š</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 1) å½“masterä¸ºfalseï¼Œè€Œdataä¸ºtrueæ—¶ï¼Œä¼šå¯¹è¯¥èŠ‚ç‚¹äº§ç”Ÿä¸¥é‡è´Ÿè·ï¼›</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 2) å½“masterä¸ºtrueï¼Œè€Œdataä¸ºfalseæ—¶ï¼Œè¯¥èŠ‚ç‚¹ä½œä¸ºä¸€ä¸ªåè°ƒè€…ï¼›</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 3) å½“masterä¸ºfalseï¼Œdataä¹Ÿä¸ºfalseæ—¶ï¼Œè¯¥èŠ‚ç‚¹å°±å˜æˆäº†ä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ã€‚</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># ä½ å¯ä»¥é€šè¿‡è¿æ¥http://localhost:9200/_cluster/healthæˆ–è€…http://localhost:9200/_cluster/nodesï¼Œæˆ–è€…ä½¿ç”¨æ’ä»¶http://github.com/lukas-vlcek/bigdeskæˆ–http://mobz.github.com/elasticsearch-headæ¥æŸ¥çœ‹é›†ç¾¤çŠ¶æ€</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 5. æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥å®šä¹‰ä¸€äº›ä¸ä¹‹å…³è”çš„é€šç”¨å±æ€§ï¼Œç”¨äºåæœŸé›†ç¾¤è¿›è¡Œåˆ†ç‰‡æ—¶çš„è¿‡æ»¤ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">node.rack</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">rack314</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 6. é»˜è®¤æƒ…å†µä¸‹ï¼Œå¤šä¸ªèŠ‚ç‚¹å¯ä»¥åœ¨åŒä¸€ä¸ªå®‰è£…è·¯å¾„å¯åŠ¨ï¼Œå¦‚æœä½ æƒ³è®©ä½ çš„esåªå¯åŠ¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">node.max_local_storage_nodes</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 7. è®¾ç½®ä¸€ä¸ªç´¢å¼•çš„åˆ†ç‰‡æ•°é‡ï¼Œé»˜è®¤å€¼ä¸º5ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">index.number_of_shards</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 8. è®¾ç½®ä¸€ä¸ªç´¢å¼•å‰¯æœ¬çš„æ•°é‡ï¼Œé»˜è®¤å€¼ä¸º1ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">index.number_of_replicas</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># å½“ä½ æƒ³è¦ç¦ç”¨åˆ†å¸ƒå¼æ—¶ï¼Œä½ å¯ä»¥è¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">index.number_of_shards</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">index.number_of_replicas</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># è¿™ä¸¤ä¸ªå±æ€§çš„è®¾ç½®ç›´æ¥å½±å“é›†ç¾¤ä¸­ç´¢å¼•å’Œæœç´¢æ“ä½œçš„æ‰§è¡Œã€‚å‡è®¾ä½ æœ‰è¶³å¤Ÿçš„æœºå™¨æ¥æŒæœ‰åˆ†ç‰‡å’Œå‰¯æœ¬ï¼Œé‚£ä¹ˆå¯ä»¥æŒ‰å¦‚ä¸‹è§„åˆ™è®¾ç½®è¿™ä¸¤ä¸ªå€¼ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 1) æ‹¥æœ‰æ›´å¤šçš„åˆ†ç‰‡å¯ä»¥æå‡ç´¢å¼•æ‰§è¡Œèƒ½åŠ›ï¼Œå¹¶å…è®¸é€šè¿‡æœºå™¨åˆ†å‘ä¸€ä¸ªå¤§å‹çš„ç´¢å¼•ï¼›</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 2) æ‹¥æœ‰æ›´å¤šçš„å‰¯æœ¬èƒ½å¤Ÿæå‡æœç´¢æ‰§è¡Œèƒ½åŠ›ä»¥åŠé›†ç¾¤èƒ½åŠ›ã€‚</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># å¯¹äºä¸€ä¸ªç´¢å¼•æ¥è¯´ï¼Œnumber_of_shardsåªèƒ½è®¾ç½®ä¸€æ¬¡ï¼Œè€Œnumber_of_replicaså¯ä»¥ä½¿ç”¨ç´¢å¼•æ›´æ–°è®¾ç½®APIåœ¨ä»»ä½•æ—¶å€™è¢«å¢åŠ æˆ–è€…å‡å°‘ã€‚</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># ElasticSearchå…³æ³¨è´Ÿè½½å‡è¡¡ã€è¿ç§»ã€ä»èŠ‚ç‚¹èšåˆç»“æœç­‰ç­‰ã€‚å¯ä»¥å°è¯•å¤šç§è®¾è®¡æ¥å®Œæˆè¿™äº›åŠŸèƒ½ã€‚</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># å¯ä»¥è¿æ¥http://localhost:9200/A/_statusæ¥æ£€æµ‹ç´¢å¼•çš„çŠ¶æ€ã€‚</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 9. é…ç½®æ–‡ä»¶æ‰€åœ¨çš„ä½ç½®ï¼Œå³elasticsearch.ymlå’Œlogging.ymlæ‰€åœ¨çš„ä½ç½®ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">path.conf</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/path/to/conf</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 10. åˆ†é…ç»™å½“å‰èŠ‚ç‚¹çš„ç´¢å¼•æ•°æ®æ‰€åœ¨çš„ä½ç½®ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">path.data</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/path/to/data</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># å¯ä»¥é€‰æ‹©çš„åŒ…å«ä¸€ä¸ªä»¥ä¸Šçš„ä½ç½®ï¼Œä½¿å¾—æ•°æ®åœ¨æ–‡ä»¶çº§åˆ«è·¨è¶Šä½ç½®ï¼Œè¿™æ ·åœ¨åˆ›å»ºæ—¶å°±æœ‰æ›´å¤šçš„è‡ªç”±è·¯å¾„ï¼Œå¦‚ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># path.data: /path/to/data1,/path/to/data2</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 11. ä¸´æ—¶æ–‡ä»¶ä½ç½®ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">path.work</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/path/to/work</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 12. æ—¥å¿—æ–‡ä»¶æ‰€åœ¨ä½ç½®ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">path.logs</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/path/to/logs</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 13. æ’ä»¶å®‰è£…ä½ç½®ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">path.plugins</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/path/to/plugins</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 14. æ’ä»¶æ‰˜ç®¡ä½ç½®ï¼Œè‹¥åˆ—è¡¨ä¸­çš„æŸä¸€ä¸ªæ’ä»¶æœªå®‰è£…ï¼Œåˆ™èŠ‚ç‚¹æ— æ³•å¯åŠ¨ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">plugin.mandatory</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">mapper-attachments,lang-groovy</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 15. JVMå¼€å§‹äº¤æ¢æ—¶ï¼ŒElasticSearchè¡¨ç°å¹¶ä¸å¥½ï¼šä½ éœ€è¦ä¿éšœJVMä¸è¿›è¡Œäº¤æ¢ï¼Œ</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\">#     å¯ä»¥å°†bootstrap.mlockallè®¾ç½®ä¸ºtrueç¦æ­¢äº¤æ¢ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">bootstrap.mlockall</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #FF9CAC\">true</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># è¯·ç¡®ä¿ES_MIN_MEMå’ŒES_MAX_MEMçš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”èƒ½å¤Ÿä¸ºElasticSearchåˆ†é…è¶³å¤Ÿçš„å†…å­˜ï¼Œä¹Ÿä¸ºç³»ç»Ÿæ“ä½œä¿ç•™è¶³å¤Ÿçš„å†…å­˜ã€‚</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 16. é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticSearchä½¿ç”¨0.0.0.0åœ°å€ï¼Œå¹¶ä¸ºhttpä¼ è¾“å¼€å¯9200-9300ç«¯å£ï¼Œä¸ºèŠ‚ç‚¹åˆ°èŠ‚ç‚¹çš„é€šä¿¡å¼€å¯9300-9400ç«¯å£ï¼Œä¹Ÿå¯ä»¥è‡ªè¡Œè®¾ç½®IPåœ°å€ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">network.bind_host</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">192.168.0.1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 17. publish_hostè®¾ç½®å…¶ä»–èŠ‚ç‚¹è¿æ¥æ­¤èŠ‚ç‚¹çš„åœ°å€ï¼Œå¦‚æœä¸è®¾ç½®çš„è¯ï¼Œåˆ™è‡ªåŠ¨è·å–ï¼Œpublish_hostçš„åœ°å€å¿…é¡»ä¸ºçœŸå®åœ°å€ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">network.publish_host</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">192.168.0.1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 18. bind_hostå’Œpublish_hostå¯ä»¥ä¸€èµ·è®¾ç½®ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">network.host</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">192.168.0.1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 19. å¯ä»¥å®šåˆ¶è¯¥èŠ‚ç‚¹ä¸å…¶ä»–èŠ‚ç‚¹äº¤äº’çš„ç«¯å£ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">transport.tcp.port</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">9300</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 20. èŠ‚ç‚¹é—´äº¤äº’æ—¶ï¼Œå¯ä»¥è®¾ç½®æ˜¯å¦å‹ç¼©</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">transport.tcp.compress</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #FF9CAC\">true</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 21. å¯ä»¥ä¸ºHttpä¼ è¾“ç›‘å¬å®šåˆ¶ç«¯å£ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">http.port</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">9200</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 22. è®¾ç½®å†…å®¹çš„æœ€å¤§é•¿åº¦ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">http.max_content_length</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">100mb</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 23. ç¦æ­¢HTTP</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">http.enabled</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #FF9CAC\">false</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 24. ç½‘å…³å…è®¸åœ¨æ‰€æœ‰é›†ç¾¤é‡å¯åæŒæœ‰é›†ç¾¤çŠ¶æ€ï¼Œé›†ç¾¤çŠ¶æ€çš„å˜æ›´éƒ½ä¼šè¢«ä¿å­˜ä¸‹æ¥ï¼Œå½“ç¬¬ä¸€æ¬¡å¯ç”¨é›†ç¾¤æ—¶ï¼Œå¯ä»¥ä»ç½‘å…³ä¸­è¯»å–åˆ°çŠ¶æ€ï¼Œé»˜è®¤ç½‘å…³ç±»å‹ï¼ˆä¹Ÿæ˜¯æ¨èçš„ï¼‰æ˜¯localï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">gateway.type</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">local</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 25. å…è®¸åœ¨Nä¸ªèŠ‚ç‚¹å¯åŠ¨åæ¢å¤è¿‡ç¨‹ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">gateway.recover_after_nodes</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 26. è®¾ç½®åˆå§‹åŒ–æ¢å¤è¿‡ç¨‹çš„è¶…æ—¶æ—¶é—´ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">gateway.recover_after_time</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">5m</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 27. è®¾ç½®è¯¥é›†ç¾¤ä¸­å¯å­˜åœ¨çš„èŠ‚ç‚¹ä¸Šé™ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">gateway.expected_nodes</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">2</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 28. è®¾ç½®ä¸€ä¸ªèŠ‚ç‚¹çš„å¹¶å‘æ•°é‡ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯åœ¨åˆå§‹æ¢å¤è¿‡ç¨‹ä¸­ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">cluster.routing.allocation.node_initial_primaries_recoveries</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">4</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># å¦ä¸€ç§æ˜¯åœ¨æ·»åŠ ã€åˆ é™¤èŠ‚ç‚¹åŠè°ƒæ•´æ—¶ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">cluster.routing.allocation.node_concurrent_recoveries</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">2</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 29. è®¾ç½®æ¢å¤æ—¶çš„ååé‡ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯æ— é™çš„ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">indices.recovery.max_size_per_sec</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 30. è®¾ç½®ä»å¯¹ç­‰èŠ‚ç‚¹æ¢å¤ç‰‡æ®µæ—¶æ‰“å¼€çš„æµçš„æ•°é‡ä¸Šé™ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">indices.recovery.concurrent_streams</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 31. è®¾ç½®ä¸€ä¸ªé›†ç¾¤ä¸­ä¸»èŠ‚ç‚¹çš„æ•°é‡ï¼Œå½“å¤šäºä¸‰ä¸ªèŠ‚ç‚¹æ—¶ï¼Œè¯¥å€¼å¯åœ¨2-4ä¹‹é—´ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">discovery.zen.minimum_master_nodes</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 32. è®¾ç½®pingå…¶ä»–èŠ‚ç‚¹æ—¶çš„è¶…æ—¶æ—¶é—´ï¼Œç½‘ç»œæ¯”è¾ƒæ…¢æ—¶å¯å°†è¯¥å€¼è®¾å¤§ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">discovery.zen.ping.timeout</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">3s</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># http://elasticsearch.org/guide/reference/modules/discovery/zen.htmlä¸Šæœ‰æ›´å¤šå…³äºdiscoveryçš„è®¾ç½®ã€‚</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 33. ç¦æ­¢å½“å‰èŠ‚ç‚¹å‘ç°å¤šä¸ªé›†ç¾¤èŠ‚ç‚¹ï¼Œé»˜è®¤å€¼ä¸ºtrueï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">discovery.zen.ping.multicast.enabled</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #FF9CAC\">false</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 34. è®¾ç½®æ–°èŠ‚ç‚¹è¢«å¯åŠ¨æ—¶èƒ½å¤Ÿå‘ç°çš„ä¸»èŠ‚ç‚¹åˆ—è¡¨ï¼ˆä¸»è¦ç”¨äºä¸åŒç½‘æ®µæœºå™¨è¿æ¥ï¼‰ï¼š</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">discovery.zen.ping.unicast.hosts</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">host1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">host2:port</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">host3[portX-portY]</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 35.è®¾ç½®æ˜¯å¦å¯ä»¥é€šè¿‡æ­£åˆ™æˆ–è€…_allåˆ é™¤æˆ–è€…å…³é—­ç´¢å¼•</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># action.destructive_requires_name é»˜è®¤false å…è®¸ å¯è®¾ç½®trueä¸å…è®¸ </span></span></code></pre></div></p>\n</details>\n","feature":true,"text":"ğŸ’¡ å…¨æ–‡èšç„¦ Docker ç¯å¢ƒä¸‹ Kibana + ElasticSearch å•æœºéƒ¨ç½²ï¼ŒåŒ…å«ç›®å½•ç»“æ„ã€é…ç½®æ¨¡æ¿å’Œå®¹å™¨å¯åŠ¨å‘½ä»¤","permalink":"/post/Dockeræ­å»ºKibana-ElasticSearch","photos":[],"count_time":{"symbolsCount":"4.4k","symbolsTime":"4 mins."},"categories":[{"name":"Docker","slug":"Docker","count":6,"path":"api/categories/Docker.json"},{"name":"ElasticSearch","slug":"Docker/ElasticSearch","count":1,"path":"api/categories/Docker/ElasticSearch.json"}],"tags":[{"name":"Docker","slug":"Docker","count":6,"path":"api/tags/Docker.json"},{"name":"ElasticSearch","slug":"ElasticSearch","count":1,"path":"api/tags/ElasticSearch.json"},{"name":"Kibana","slug":"Kibana","count":1,"path":"api/tags/Kibana.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">åˆ›å»ºå®¿ä¸»æœºç›®å½•</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">é…ç½®</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8ElasticSearch\"><span class=\"toc-text\">å¯åŠ¨ElasticSearch</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%90%AF%E5%8A%A8Kibana\"><span class=\"toc-text\">å¯åŠ¨Kibana</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Elasticsearch-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3\"><span class=\"toc-text\">Elasticsearch é…ç½®æ–‡ä»¶è¯¦è§£</span></a></li></ol>","author":{"name":"GlassCat","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"ã€Šè®ºè¯­Â·ä¸ºæ”¿ã€‹<br/>å¾å°ç»ˆæ—¥ä¸é£Ÿï¼Œç»ˆå¤œä¸å¯ï¼Œä»¥æ€æ— ç›Šï¼Œä¸å¦‚å­¦ä¹Ÿ<br/>--å­”å­--","socials":{"github":"https://github.com/sunknightzy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/someaware","csdn":"","juejin":"","customs":{"mail":{"icon":"/svg/mail.svg","link":"mailto:593739859@qq.com"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"Dockeræ­å»ºNacos","uid":"b80b88ff323cbedbe9f9c88d7ffb2f8f","slug":"Dockeræ­å»ºNacos","date":"2018-04-04T06:31:11.000Z","updated":"2025-05-05T13:49:36.000Z","comments":true,"path":"api/articles/Dockeræ­å»ºNacos.json","keywords":null,"cover":"https://raw.githubusercontent.com/sunknightzy/picsee/main/Picsee/abnerworks.Typora/coverw5P6d6-KtzFAP.png","text":"ğŸ’¡ å…¨æ–‡èšç„¦ Docker ç¯å¢ƒä¸‹åŸºäº MySQL æ¨¡å¼çš„ Nacos å•æœºéƒ¨ç½²ï¼ŒåŒ…å«ç›®å½•ç»“æ„ã€é…ç½®æ¨¡æ¿å’Œå®¹å™¨å¯åŠ¨å‘½ä»¤ä»¥åŠè§£å†³ Dubbo è¿æ¥å¤±è´¥çš„é—®é¢˜","permalink":"/post/Dockeræ­å»ºNacos","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"Docker","slug":"Docker","count":6,"path":"api/categories/Docker.json"},{"name":"Nacos","slug":"Docker/Nacos","count":1,"path":"api/categories/Docker/Nacos.json"}],"tags":[{"name":"Docker","slug":"Docker","count":6,"path":"api/tags/Docker.json"},{"name":"Nacos","slug":"Nacos","count":1,"path":"api/tags/Nacos.json"}],"author":{"name":"GlassCat","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"ã€Šè®ºè¯­Â·ä¸ºæ”¿ã€‹<br/>å¾å°ç»ˆæ—¥ä¸é£Ÿï¼Œç»ˆå¤œä¸å¯ï¼Œä»¥æ€æ— ç›Šï¼Œä¸å¦‚å­¦ä¹Ÿ<br/>--å­”å­--","socials":{"github":"https://github.com/sunknightzy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/someaware","csdn":"","juejin":"","customs":{"mail":{"icon":"/svg/mail.svg","link":"mailto:593739859@qq.com"}}}},"feature":true},"next_post":{"title":"Docker æ­å»º zookeeper å•æœº","uid":"a66406382ee33156e956b3755bbd8fe4","slug":"Docker-æ­å»º-zookeeper-å•æœº","date":"2018-04-04T04:39:16.000Z","updated":"2021-05-25T05:01:30.000Z","comments":true,"path":"api/articles/Docker-æ­å»º-zookeeper-å•æœº.json","keywords":null,"cover":"https://raw.githubusercontent.com/sunknightzy/picsee/main/Picsee/abnerworks.Typora/1*M6q8tmdf3a51UdxY5izllgEZwO6c-LVZygL.png","text":"ğŸ’¡ å…¨æ–‡èšç„¦ Docker ç¯å¢ƒä¸‹çš„ Zookeeper å•æœºéƒ¨ç½²ï¼ŒåŒ…å«ç›®å½•ç»“æ„ã€é…ç½®æ¨¡æ¿å’Œå®¹å™¨å¯åŠ¨å‘½ä»¤","permalink":"/post/Docker-æ­å»º-zookeeper-å•æœº","photos":[],"count_time":{"symbolsCount":566,"symbolsTime":"1 mins."},"categories":[{"name":"Docker","slug":"Docker","count":6,"path":"api/categories/Docker.json"},{"name":"Zookeeper","slug":"Docker/Zookeeper","count":1,"path":"api/categories/Docker/Zookeeper.json"}],"tags":[{"name":"Docker","slug":"Docker","count":6,"path":"api/tags/Docker.json"},{"name":"Zookeeper","slug":"Zookeeper","count":2,"path":"api/tags/Zookeeper.json"}],"author":{"name":"GlassCat","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"ã€Šè®ºè¯­Â·ä¸ºæ”¿ã€‹<br/>å¾å°ç»ˆæ—¥ä¸é£Ÿï¼Œç»ˆå¤œä¸å¯ï¼Œä»¥æ€æ— ç›Šï¼Œä¸å¦‚å­¦ä¹Ÿ<br/>--å­”å­--","socials":{"github":"https://github.com/sunknightzy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/someaware","csdn":"","juejin":"","customs":{"mail":{"icon":"/svg/mail.svg","link":"mailto:593739859@qq.com"}}}},"feature":true}}