{"title":"ES-02 Kibana的使用方法","uid":"4775e6c7c44b69c5a8eee7dc43222d3a","slug":"ES-02-Kibana的使用方法","date":"2018-09-14T04:26:09.000Z","updated":"2018-09-14T04:36:19.000Z","comments":true,"path":"api/articles/ES-02-Kibana的使用方法.json","keywords":null,"cover":"https://raw.githubusercontent.com/sunknightzy/picsee/main/Picsee/abnerworks.Typora/blog-thumbnail-generic-release-CWWcnq.png","content":"<p>安装方法参考我之前的 <a href=\"Docker%E6%90%AD%E5%BB%BAKibana-ElasticSearch\">Docker安装Kibana+ElasticSearch</a></p>\n<h2 id=\"Kibana基础功能\"><a href=\"#Kibana基础功能\" class=\"headerlink\" title=\"Kibana基础功能\"></a>Kibana基础功能</h2><p>前往 <a target=\"_blank\" rel=\"noopener\" href=\"http://localhost:5601/app/kibana#/dev_tools/console\">Kibana界面</a> 的 <code>Dev Tools</code> 界面, 执行如下命令:</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">GET</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">_cluster/health</span></span></code></pre></div><p>得到如下关于集群健康状况的JSON响应:</p>\n<div class=\"language-json\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">json</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">cluster_name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">elasticsearch</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">status</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">red</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">timed_out</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">false,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #546E7A; font-style: italic\">// 集群中的节点数</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">number_of_nodes</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #EEFFFF\"> </span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #546E7A; font-style: italic\">// 存储数据的节点数</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">number_of_data_nodes</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #546E7A; font-style: italic\">// 活跃的primary shard数</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">active_primary_shards</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">14</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #EEFFFF\"> </span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #546E7A; font-style: italic\">// 活跃的shard数, 包括primary shard和replica shard</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">active_shards</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">14</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #EEFFFF\"> </span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #546E7A; font-style: italic\">// 当前正在从一个节点迁往其他节点的分片的数量, 通常是0. 当ES发现集群不太均衡(如添加或下线一个节点)时, 该值会上涨</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">relocating_shards</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #EEFFFF\"> </span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #546E7A; font-style: italic\">// 刚创建的分片个数, 创建第一个索引时、节点重启时, 会短暂处于此状态(不应长期停留此状态)</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">initializing_shards</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #546E7A; font-style: italic\">// 在集群中存在, 却又不能找到 -- 即未分配的副本</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">unassigned_shards</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">delayed_unassigned_shards</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">number_of_pending_tasks</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">number_of_in_flight_fetch</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">task_max_waiting_in_queue_millis</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">active_shards_percent_as_number</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">87.5</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h3 id=\"集群的状态status\"><a href=\"#集群的状态status\" class=\"headerlink\" title=\"集群的状态status\"></a>集群的状态status</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>① <code>green</code>: 所有primary shard和replica shard都已成功分配, 集群是100%可用的;</p>\n<p>② <code>yellow</code>: 所有primary shard都已成功分配, 但至少有一个replica shard缺失. 此时集群所有功能都正常使用, 数据不会丢失, 搜索结果依然完整, 但集群的可用性减弱. —— 需要及时处理的警告.</p>\n<p>③ <code>red</code>: 至少有一个 primary shard (以及它的全部副本分片)缺失 —— 部分数据不能使用, 搜索只能返回部分数据, 而分配到这个分配上的写入请求会返回一个异常. 此时虽然可以运行部分功能, 但为了索引数据的完整性, 需要尽快修复集群.</p></blockquote>\n<p><strong>集群状态为什么是yellow?</strong></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>① 当前只有一个Elasticsearch节点, 而且此时ES中只有一个Kibana内建的索引数据.<br>② ES为每个index默认分配5个primary shard和5个replica shard, 为了保证高可用, 它还要求primary shard和replica shard不能在同一个node上.<br>③ 当前服务中, Kibana内建的index是1个primary shard和1个replica shard, 由于只有1个node, 所以只有primary shard被分配和启动了, 而replica shard没有被成功分配(没有其他node可用).</p></blockquote>\n<h3 id=\"集群中的节点数\"><a href=\"#集群中的节点数\" class=\"headerlink\" title=\"集群中的节点数\"></a>集群中的节点数</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>使用<code>GET _cat/nodes?v</code> 查看当前节点数:</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">ip</span><span style=\"color: #EEFFFF\">            </span><span style=\"color: #C3E88D\">heap.percent</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">ram.percent</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">cpu</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">load_1m</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">load_5m</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">load_15m</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">node.role</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">master</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">name</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">172.16.22.133</span><span style=\"color: #EEFFFF\">           </span><span style=\"color: #F78C6C\">62</span><span style=\"color: #EEFFFF\">          </span><span style=\"color: #F78C6C\">98</span><span style=\"color: #EEFFFF\">   </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F78C6C\">0.98</span><span style=\"color: #EEFFFF\">    </span><span style=\"color: #F78C6C\">1.25</span><span style=\"color: #EEFFFF\">     </span><span style=\"color: #F78C6C\">1.39</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">mdi</span><span style=\"color: #EEFFFF\">       </span><span style=\"color: #EEFFFF\">*</span><span style=\"color: #EEFFFF\">      </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #C3E88D\">UlY804</span></span></code></pre></div></blockquote>\n<h3 id=\"未分配的分片\"><a href=\"#未分配的分片\" class=\"headerlink\" title=\"未分配的分片\"></a>未分配的分片</h3><blockquote>\n<p><code>unassigned_shards</code>: 已经在集群状态中存在、但在集群里又找不到的分片, 来源通常是未分配的副本. 比如: 一个有 5 分片和 1 副本的索引, 在单节点集群上就会有 5 个未分配副本分片.<br>如果集群状态是<code>red</code>, 也会长期存在未分配分片(因为缺少主分片).</p></blockquote>\n<h3 id=\"索引-Index-管理\"><a href=\"#索引-Index-管理\" class=\"headerlink\" title=\"索引 Index 管理\"></a>索引 Index 管理</h3><h4 id=\"创建索引\"><a href=\"#创建索引\" class=\"headerlink\" title=\"创建索引\"></a>创建索引</h4><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 创建索引API: </span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">PUT</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">test_index?pretty</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 响应信息如下:</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\">#! Deprecation: the default number of shards will change from [5] to [1] in 7.0.0; if you wish to continue using the default of [5] shards, you must manage this on the create index request or with an index template</span></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 过时说明:在创建索引时, Elasticsearch提出过时警告: 从7.0.0版本开始, 默认的Shard个数将从[5]变为[1].如果要继续使用默认的[5]个分片(Shard), 就需要在创建Index时指定, 或者通过索引模板创建Index.</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #FFCB6B\">&quot;acknowledged&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #FFCB6B\">&quot;shards_acknowledged&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #FFCB6B\">&quot;index&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">test_index</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"查询索引\"><a href=\"#查询索引\" class=\"headerlink\" title=\"查询索引\"></a>查询索引</h4><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 查询所有的索引</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">GET</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/_cat/indices?v</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">health</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">status</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">index</span><span style=\"color: #EEFFFF\">                           </span><span style=\"color: #C3E88D\">uuid</span><span style=\"color: #EEFFFF\">                   </span><span style=\"color: #C3E88D\">pri</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">rep</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">docs.count</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">docs.deleted</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">store.size</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">pri.store.size</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">yellow</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">open</span><span style=\"color: #EEFFFF\">   </span><span style=\"color: #C3E88D\">test_index</span><span style=\"color: #EEFFFF\">                      </span><span style=\"color: #C3E88D\">JYXAg2VfQTC9NnLFdflzFA</span><span style=\"color: #EEFFFF\">   </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #EEFFFF\">   </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #EEFFFF\">          </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #EEFFFF\">            </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #EEFFFF\">       </span><span style=\"color: #F78C6C\">460</span><span style=\"color: #C3E88D\">b</span><span style=\"color: #EEFFFF\">           </span><span style=\"color: #F78C6C\">460</span><span style=\"color: #C3E88D\">b</span></span></code></pre></div><h4 id=\"删除索引\"><a href=\"#删除索引\" class=\"headerlink\" title=\"删除索引\"></a>删除索引</h4><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">DELETE</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">test_index?pretty</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 响应信息如下: </span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #FFCB6B\">&quot;acknowledged&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">true</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h3 id=\"文档-Doc-管理\"><a href=\"#文档-Doc-管理\" class=\"headerlink\" title=\"文档 Doc 管理\"></a>文档 Doc 管理</h3><p>ES是一款面向文档的数据搜索、分析引擎. Document结构说明:</p>\n<blockquote>\n<p>(1) 基于面向对象的开发思想, 应用系统中的数据结构都是很复杂的: 对象中嵌套对象, 如CRM系统中的客户对象中, 还会嵌入客户相关的企业对象.</p>\n<p>(2) 对象数据存储到数据库中, 需要分解, 将嵌套对象分解为扁平的多张表数据, 每次操作时需要还原回对象格式, 过程繁琐.</p>\n<p>(3) ES存储的是JSON格式的文档, 基于此, ES可以提供复杂的索引, 全文检索, 分析聚合等功能.</p>\n<p>(4) document格式示例:</p>\n<div class=\"language-json\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">json</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">id</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">1000</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">杰尼龟</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">sex</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">男</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">age</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">25</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #EEFFFF\"> </span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">phone</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">13312341234</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #EEFFFF\"> </span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">email</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">12345@qq.com</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">company</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Alibaba</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">        </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">location</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">杭州</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">join_date</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">2018/01/01</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div></blockquote>\n<h4 id=\"添加文档\"><a href=\"#添加文档\" class=\"headerlink\" title=\"添加文档\"></a>添加文档</h4><p>添加API语法</p>\n<div class=\"language-json\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">json</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #EEFFFF\">PUT index/_doc/id</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">key1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">value1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">key2</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">value2</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>添加 id &#x3D; 1 的文档</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">PUT</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">blog/_doc/1?pretty</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;name&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Kibana使用方法</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;author&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">GlassCat</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;category&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ElasticSearch系列</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;desc&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ES学习必读经典,殿堂级著作！</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;words&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\">  </span><span style=\"color: #F78C6C\">1024</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;publisher&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">GlassCat&#39;s blog</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;date&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">2018-09-14</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;tags&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> [ </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ElasticSearch</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">搜索引擎</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">]</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>响应</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #EEFFFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_index&quot; : &quot;blog&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_type&quot; : &quot;_doc&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_id&quot; : &quot;1&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_version&quot; : 1,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;result&quot; : &quot;created&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_shards&quot; : &#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    &quot;total&quot; : 2,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    &quot;successful&quot; : 1,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    &quot;failed&quot; : 0</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_seq_no&quot; : 0,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_primary_term&quot; : 1</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\"></span></span></code></pre></div><h4 id=\"查询文档\"><a href=\"#查询文档\" class=\"headerlink\" title=\"查询文档\"></a>查询文档</h4><p>查询 id &#x3D; 1 的文档</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">GET</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">blog/_doc/1?pretty</span></span></code></pre></div><p>响应</p>\n<div class=\"language-json\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">json</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_index</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">blog</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_type</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">_doc</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_id</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_version</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_seq_no</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_primary_term</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">found</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">true,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_source</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Kibana使用方法</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">author</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">GlassCat</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">category</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ElasticSearch系列</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">desc</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ES学习必读经典,殿堂级著作！</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">words</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1024</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">publisher</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">XX工业出版社</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">date</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">2018-09-14</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">tags</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">[</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ElasticSearch</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">搜索引擎</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"更新文档\"><a href=\"#更新文档\" class=\"headerlink\" title=\"更新文档\"></a>更新文档</h4><h5 id=\"部分更新\"><a href=\"#部分更新\" class=\"headerlink\" title=\"部分更新\"></a>部分更新</h5><p>更新博客的作者</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">POST</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">blog/_doc/1/_update?pretty</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #FFCB6B\">&quot;doc&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;author&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Jane Doe</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">&#125;</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #EEFFFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_index&quot; : &quot;blog&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_type&quot; : &quot;_doc&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_id&quot; : &quot;1&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_version&quot; : 2,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;result&quot; : &quot;updated&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_shards&quot; : &#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    &quot;total&quot; : 2,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    &quot;successful&quot; : 1,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    &quot;failed&quot; : 0</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_seq_no&quot; : 1,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_primary_term&quot; : 1</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\"></span></span></code></pre></div><p>更新文档的字数，通过脚本的方式</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 脚本更新文档</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">POST</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">blog/_doc/1/_update?pretty</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #FFCB6B\">&quot;script&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ctx._source.words += 5</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"文档替换\"><a href=\"#文档替换\" class=\"headerlink\" title=\"文档替换\"></a>文档替换</h5><p>替换API 与 添加API 相同, 只不过文档 id 要存在, 此时系统将判定为修改操作。</p>\n<p>—— 无论文档数据是否存在修改, 对同一个 id 的文档执行1次以上的PUT操作, 都是修改操作.</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">PUT</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">blog/_doc/1?pretty</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;name&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Kibana使用方法【修订版】</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;author&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">GlassCat</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;category&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ElasticSearch系列</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;desc&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ES学习必读经典,殿堂级著作！</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;words&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\">  </span><span style=\"color: #F78C6C\">1932</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;publisher&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">XX工业出版社</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;date&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">2018-10-14</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #FFCB6B\">&quot;tags&quot;</span><span style=\"color: #82AAFF\">:</span><span style=\"color: #EEFFFF\"> [ </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ElasticSearch</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">,</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">搜索引擎</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">]</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><div class=\"language-json\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">json</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_index</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">blog</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_type</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">_doc</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_id</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_version</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #546E7A; font-style: italic\">// 创建的时候是created, 替换更新是updated</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">result</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">updated</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_shards</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">total</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">successful</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">failed</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_seq_no</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">_primary_term</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #89DDFF\">:</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"删除文档\"><a href=\"#删除文档\" class=\"headerlink\" title=\"删除文档\"></a>删除文档</h4><p>删除id&#x3D;1的文档</p>\n<div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">DELETE</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">blog/_doc/1</span></span></code></pre></div><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #EEFFFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_index&quot; : &quot;blog&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_type&quot; : &quot;_doc&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_id&quot; : &quot;1&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_version&quot; : 7,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;result&quot; : &quot;deleted&quot;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_shards&quot; : &#123;</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    &quot;total&quot; : 2,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    &quot;successful&quot; : 1,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">    &quot;failed&quot; : 0</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &#125;,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_seq_no&quot; : 6,</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">  &quot;_primary_term&quot; : 1</span></span>\n<span class=\"line\"><span style=\"color: #EEFFFF\">&#125;</span></span></code></pre></div><h3 id=\"Cat-API\"><a href=\"#Cat-API\" class=\"headerlink\" title=\"Cat API\"></a>Cat API</h3><div class=\"language-bash\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">bash</span><pre class=\"shiki material-theme\" style=\"background-color: #263238\" tabindex=\"0\"><code><span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 查看集群的健康状态</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">GET</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">_cat/health?v</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 查看集群的nodes</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">GET</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">_cat/nodes?v</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #546E7A; font-style: italic\"># 查看集群中所有的索引</span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">GET</span><span style=\"color: #EEFFFF\"> </span><span style=\"color: #C3E88D\">/_cat/indices?v</span></span></code></pre></div>","feature":true,"text":"文章介绍了Kibana的基础功能，索引管理，文档管理...","permalink":"/post/ES-02-Kibana的使用方法","photos":[],"count_time":{"symbolsCount":"7.5k","symbolsTime":"7 mins."},"categories":[{"name":"ElasticSearch系列","slug":"ElasticSearch系列","count":5,"path":"api/categories/ElasticSearch系列.json"}],"tags":[{"name":"ElasticSearch","slug":"ElasticSearch","count":6,"path":"api/tags/ElasticSearch.json"},{"name":"Kibana","slug":"Kibana","count":2,"path":"api/tags/Kibana.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Kibana%E5%9F%BA%E7%A1%80%E5%8A%9F%E8%83%BD\"><span class=\"toc-text\">Kibana基础功能</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%9B%86%E7%BE%A4%E7%9A%84%E7%8A%B6%E6%80%81status\"><span class=\"toc-text\">集群的状态status</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%9B%86%E7%BE%A4%E4%B8%AD%E7%9A%84%E8%8A%82%E7%82%B9%E6%95%B0\"><span class=\"toc-text\">集群中的节点数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9C%AA%E5%88%86%E9%85%8D%E7%9A%84%E5%88%86%E7%89%87\"><span class=\"toc-text\">未分配的分片</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%B4%A2%E5%BC%95-Index-%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">索引 Index 管理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95\"><span class=\"toc-text\">创建索引</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E8%AF%A2%E7%B4%A2%E5%BC%95\"><span class=\"toc-text\">查询索引</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95\"><span class=\"toc-text\">删除索引</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%96%87%E6%A1%A3-Doc-%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">文档 Doc 管理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0%E6%96%87%E6%A1%A3\"><span class=\"toc-text\">添加文档</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%9F%A5%E8%AF%A2%E6%96%87%E6%A1%A3\"><span class=\"toc-text\">查询文档</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%9B%B4%E6%96%B0%E6%96%87%E6%A1%A3\"><span class=\"toc-text\">更新文档</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E9%83%A8%E5%88%86%E6%9B%B4%E6%96%B0\"><span class=\"toc-text\">部分更新</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%96%87%E6%A1%A3%E6%9B%BF%E6%8D%A2\"><span class=\"toc-text\">文档替换</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%A0%E9%99%A4%E6%96%87%E6%A1%A3\"><span class=\"toc-text\">删除文档</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Cat-API\"><span class=\"toc-text\">Cat API</span></a></li></ol></li></ol>","author":{"name":"GlassCat","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"《论语·为政》<br/>吾尝终日不食，终夜不寝，以思无益，不如学也<br/>--孔子--","socials":{"github":"https://github.com/sunknightzy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/someaware","csdn":"","juejin":"","customs":{"mail":{"icon":"/svg/mail.svg","link":"mailto:593739859@qq.com"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"ES-03 Elasticsearch的简单查询用法","uid":"73ef3b093e20c3ad31e94ce3ba755d05","slug":"ES-03-ElasticSearch查询文档","date":"2018-09-14T04:56:09.000Z","updated":"2018-09-14T05:16:19.000Z","comments":true,"path":"api/articles/ES-03-ElasticSearch查询文档.json","keywords":null,"cover":"https://raw.githubusercontent.com/sunknightzy/picsee/main/Picsee/abnerworks.Typora/blog-thumbnail-generic-release-CWWcnq.png","text":"文章介绍了6中ElasticSearch的简单查询的方法...","permalink":"/post/ES-03-ElasticSearch查询文档","photos":[],"count_time":{"symbolsCount":"7.7k","symbolsTime":"7 mins."},"categories":[{"name":"ElasticSearch系列","slug":"ElasticSearch系列","count":5,"path":"api/categories/ElasticSearch系列.json"}],"tags":[{"name":"ElasticSearch","slug":"ElasticSearch","count":6,"path":"api/tags/ElasticSearch.json"}],"author":{"name":"GlassCat","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"《论语·为政》<br/>吾尝终日不食，终夜不寝，以思无益，不如学也<br/>--孔子--","socials":{"github":"https://github.com/sunknightzy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/someaware","csdn":"","juejin":"","customs":{"mail":{"icon":"/svg/mail.svg","link":"mailto:593739859@qq.com"}}}},"feature":true},"next_post":{"title":"ES-01 ElasticSearch基础概念","uid":"4cd15f1f7166f2cddbe2d554199d5739","slug":"ES-01-ElasticSearch基础概念","date":"2018-09-14T03:26:09.000Z","updated":"2018-09-14T03:36:09.000Z","comments":true,"path":"api/articles/ES-01-ElasticSearch基础概念.json","keywords":null,"cover":"https://raw.githubusercontent.com/sunknightzy/picsee/main/Picsee/abnerworks.Typora/blog-thumbnail-generic-release-CWWcnq.png","text":"文章简述了ElasticSearch的定义、优势、使用场景以及基本概念（Node、Replica、Index、Type、Document、Field、Mapping等），通过图表展示了ElasticSearch的分层架构和模块组成...","permalink":"/post/ES-01-ElasticSearch基础概念","photos":[],"count_time":{"symbolsCount":"6.3k","symbolsTime":"6 mins."},"categories":[{"name":"ElasticSearch系列","slug":"ElasticSearch系列","count":5,"path":"api/categories/ElasticSearch系列.json"}],"tags":[{"name":"ElasticSearch","slug":"ElasticSearch","count":6,"path":"api/tags/ElasticSearch.json"}],"author":{"name":"GlassCat","slug":"blog-author","avatar":"/img/avatar.png","link":"/","description":"《论语·为政》<br/>吾尝终日不食，终夜不寝，以思无益，不如学也<br/>--孔子--","socials":{"github":"https://github.com/sunknightzy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/someaware","csdn":"","juejin":"","customs":{"mail":{"icon":"/svg/mail.svg","link":"mailto:593739859@qq.com"}}}},"feature":true}}